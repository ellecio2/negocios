<?phpnamespace App\Http\Controllers\Workshop;use App\Http\Controllers\Controller;use App\Models\Workshop;use App\Models\WorkshopClientRequest;use App\Models\WorkshopServiceProposal;use Illuminate\Support\Facades\Auth;class DashboardController extends Controller {    public function index() {        //usuario recien autenticado        $user = Auth::user();        //aqui esta la empresa actual        $workshop = Workshop::where('user_id', $user->id)->first();        //porpuesta que a realizado la actual empresa        $workshopServiceProposals = WorkshopServiceProposal::where('workshop_id', $workshop->id)->count();        $totalAcceptedProposals = WorkshopServiceProposal::where('workshop_id', $workshop->id)            ->whereNotNull('client_accepts_mechanic')            ->count();        $totalActiveRequests = WorkshopClientRequest::whereHas('order', function ($query) use ($user) {            $query->where('category_translation_id', $user->category_translation_id);        })            ->where('estado_solicitud', 'activo')            ->count();        return view('workshop.dashboard', compact('totalActiveRequests', 'workshopServiceProposals', 'totalAcceptedProposals'));    }}